<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Defining Client Side Representation Classes</title>
<link rel="stylesheet" href="../../../src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../../../index.html" title="HPX 1.2.0">
<link rel="up" href="../components.html" title="Writing Components">
<link rel="prev" href="components_server.html" title="Defining Components">
<link rel="next" href="create_components.html" title="Creating Component Instances">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="HPX" width="567" height="125" src="../../../images/hpx_1_2_0_draft.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="components_server.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../components.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="create_components.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="hpx.manual.components.components_client"></a><a class="link" href="components_client.html" title="Defining Client Side Representation Classes">Defining Client
        Side Representation Classes</a>
</h4></div></div></div>
<p>
          Often it is very convenient to define a separate type for a component which
          can be used on the client side (from where the component is instantiated
          and used). This step might seem as unnecessary duplicating code, however
          it significantly increases the type safety of the code.
        </p>
<p>
          A possible implementation of such a client side representation for the
          component described in the previous section could look like:
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">hpx</span><span class="special">/</span><span class="identifier">include</span><span class="special">/</span><span class="identifier">components</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">namespace</span> <span class="identifier">app</span>
<span class="special">{</span>
    <span class="comment">// Define a client side representation type for the component type</span>
    <span class="comment">// 'some_component' defined in the previous section.</span>
    <span class="comment">//</span>
    <span class="keyword">struct</span> <span class="identifier">some_component_client</span>
      <span class="special">:</span> <span class="identifier">hpx</span><span class="special">::</span><span class="identifier">components</span><span class="special">::</span><span class="identifier">client_base</span><span class="special">&lt;</span><span class="identifier">some_component_client</span><span class="special">,</span> <span class="identifier">some_component</span><span class="special">&gt;</span>
    <span class="special">{</span>
        <span class="keyword">using</span> <span class="identifier">base_type</span> <span class="special">=</span> <span class="identifier">hpx</span><span class="special">::</span><span class="identifier">components</span><span class="special">::</span><span class="identifier">client_base</span><span class="special">&lt;</span>
                <span class="identifier">some_component_client</span><span class="special">,</span> <span class="identifier">some_component</span><span class="special">&gt;;</span>

        <span class="identifier">some_component_client</span><span class="special">(</span><span class="identifier">hpx</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">hpx</span><span class="special">::</span><span class="identifier">id_type</span><span class="special">&gt;</span> <span class="special">&amp;&amp;</span> <span class="identifier">id</span><span class="special">)</span>
          <span class="special">:</span> <span class="identifier">base_type</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">id</span><span class="special">))</span>
        <span class="special">{}</span>

        <span class="identifier">hpx</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">some_member_function</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">s</span><span class="special">)</span>
        <span class="special">{</span>
            <span class="identifier">some_component</span><span class="special">::</span><span class="identifier">some_member_action</span> <span class="identifier">act</span><span class="special">;</span>
            <span class="keyword">return</span> <span class="identifier">hpx</span><span class="special">::</span><span class="identifier">async</span><span class="special">(</span><span class="identifier">act</span><span class="special">,</span> <span class="identifier">get_id</span><span class="special">(),</span> <span class="identifier">s</span><span class="special">);</span>
        <span class="special">}</span>
    <span class="special">};</span>
<span class="special">}</span>
</pre>
<p>
          A client side object stores the global id of the component instance it
          represents. This global id is accessible by calling the function <code class="computeroutput"><span class="identifier">client_base</span><span class="special">&lt;&gt;::</span><span class="identifier">get_id</span><span class="special">()</span></code>.
          The special constructor which is provided in the example allows to create
          this client side object directly using the API function <code class="computeroutput"><a class="link" href="../../new_idm140143705784448.html" title="Function template new_">hpx::new_&lt;&gt;()</a></code>.
        </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2011-2018 The STE||AR Group
      (http://stellar-group.org)<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">LICENSE_1_0.txt</a>
        or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="components_server.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../components.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="create_components.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>

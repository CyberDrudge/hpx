<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Building HPX</title>
<link rel="stylesheet" href="../../../src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../../../index.html" title="HPX 1.2.0">
<link rel="up" href="../build_system.html" title="The HPX Build System">
<link rel="prev" href="prerequisites/hwloc_installation.html" title="Installing Hwloc">
<link rel="next" href="building_hpx/cmake_variables.html" title="CMake Variables used to configure HPX">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="HPX" width="567" height="125" src="../../../images/hpx_1_2_0_draft.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="prerequisites/hwloc_installation.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../build_system.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="building_hpx/cmake_variables.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="hpx.manual.build_system.building_hpx"></a><a class="link" href="building_hpx.html" title="Building HPX">Building <span class="emphasis"><em>HPX</em></span></a>
</h4></div></div></div>
<div class="toc"><dl class="toc">
<dt><span class="section"><a href="building_hpx/cmake_variables.html">CMake
          Variables used to configure <span class="emphasis"><em>HPX</em></span></a></span></dt>
<dt><span class="section"><a href="building_hpx/cmake_toolchains.html">CMake
          Toolchains shipped with HPX</a></span></dt>
<dt><span class="section"><a href="building_hpx/build_recipes.html">Build
          recipes</a></span></dt>
<dt><span class="section"><a href="building_hpx/doc_tools.html">Setting
          up the <span class="emphasis"><em>HPX</em></span> Documentation Tool Chain</a></span></dt>
</dl></div>
<h6>
<a name="hpx.manual.build_system.building_hpx.h0"></a>
          <span class="phrase"><a name="hpx.manual.build_system.building_hpx.info"></a></span><a class="link" href="building_hpx.html#hpx.manual.build_system.building_hpx.info">Basic
          Information</a>
        </h6>
<p>
          Once <a href="https://www.cmake.org" target="_top">CMake</a> has been run, the
          build process can be started. The <span class="emphasis"><em>HPX</em></span> build process
          is highly configurable through <a href="https://www.cmake.org" target="_top">CMake</a>
          and various <a href="https://www.cmake.org" target="_top">CMake</a> variables
          influence the build process. The build process consists of the following
          parts:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              <span class="bold"><strong>The <span class="emphasis"><em>HPX</em></span> core libraries</strong></span>
              (target core): This forms the basic set of <span class="emphasis"><em>HPX</em></span>
              libraries. The generated targets are:
              <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
                    hpx: The core <span class="emphasis"><em>HPX</em></span> library (always enabled).
                  </li>
<li class="listitem">
                    hpx_init: The <span class="emphasis"><em>HPX</em></span> initialization library
                    that applications need to link against to define the <span class="emphasis"><em>HPX</em></span>
                    entry points (disabled for static builds).
                  </li>
<li class="listitem">
                    iostreams_component: The component used for (distributed) IO
                    (always enabled).
                  </li>
<li class="listitem">
                    component_storage_component: The component needed for migration
                    to persistent storage.
                  </li>
<li class="listitem">
                    unordered_component: The component needed for a distributed (partitioned)
                    hash table.
                  </li>
<li class="listitem">
                    partioned_vector_component: The component needed for a distributed
                    (partitioned) vector.
                  </li>
<li class="listitem">
                    memory_component: A dynamically loaded plugin that exposed memory
                    based performance counters (only available on Linux).
                  </li>
<li class="listitem">
                    io_counter_component: A dynamically loaded plugin plugin that
                    exposes I/O performance counters (only available on Linux).
                  </li>
<li class="listitem">
                    papi_component: A dynamically loaded plugin that exposes PAPI
                    performance counters (enabled with HPX_WITH_PAPI, default is
                    Off).
                  </li>
</ul></div>
            </li>
<li class="listitem">
              <span class="bold"><strong><span class="emphasis"><em>HPX</em></span> Examples</strong></span>
              (target examples): This target is enabled by default and builds all
              <span class="emphasis"><em>HPX</em></span> examples (disable by setting HPX_WITH_BUILD_EXAMPLES=Off).
              <span class="emphasis"><em>HPX</em></span> examples are part of the 'all' target and
              are included in the installation if enabled.
            </li>
<li class="listitem">
              <span class="bold"><strong><span class="emphasis"><em>HPX</em></span> Tests</strong></span> (target
              tests): This target builds the <span class="emphasis"><em>HPX</em></span> test suite
              and is enabled by default (disable by setting HPX_WITH_BUILD_TESTS=Off).
              They are not built by the 'all' target and have to be built separately.
            </li>
<li class="listitem">
              <span class="bold"><strong><span class="emphasis"><em>HPX</em></span> Documentation</strong></span>
              (target docs): This target builds the Documentation, this is not enabled
              by default. For more information see <a class="link" href="building_hpx/doc_tools.html" title="Setting up the HPX Documentation Tool Chain">Setting
              up the <span class="emphasis"><em>HPX</em></span> Documentation Tool Chain</a>.
            </li>
</ul></div>
<p>
          For a complete list of available <a href="https://www.cmake.org" target="_top">CMake</a>
          variables that influence the build of <span class="emphasis"><em>HPX</em></span> see <a class="link" href="building_hpx/cmake_variables.html" title="CMake Variables used to configure HPX">CMake Variables
          used to configure <span class="emphasis"><em>HPX</em></span></a>.
        </p>
<p>
          The variables can be used to refine the recipes that can be found <a class="link" href="building_hpx/build_recipes.html" title="Build recipes">here</a>
          which show some basic steps on how to build HPX for a specific platform
        </p>
<p>
          In order to use <span class="emphasis"><em>HPX</em></span>, only the core libraries are required
          (the ones marked as optional above are truly optional). When building against
          <span class="emphasis"><em>HPX</em></span>, the <a href="https://www.cmake.org" target="_top">CMake</a>
          variable <code class="computeroutput"><span class="identifier">HPX_LIBRARIES</span></code>
          will contain hpx and hpx_init (for pkgconfig, those are added to the <code class="computeroutput"><span class="identifier">Libs</span></code> sections). In order to use the optional
          libraries, you need to specify them as link dependencies in your build
          (See <a class="link" href="using_hpx.html" title="Building Projects using HPX">Building Projects
          using HPX</a>.
        </p>
<p>
          As <span class="emphasis"><em>HPX</em></span> is a modern C++ Library we require a certain
          minimal set of features from the C++11 standard. In addition, we make use
          of certain C++14 features if the used compiler supports them. This means
          that the <span class="emphasis"><em>HPX</em></span> build system will try to determine the
          highest support C++ standard flavor and check for availability of those
          features. That is, the default will be the highest C++ standard version
          available. If you want to force <span class="emphasis"><em>HPX</em></span> to use a specific
          C++ standard version you can use the following <a href="https://www.cmake.org" target="_top">CMake</a>
          variables:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              <span class="bold"><strong><code class="computeroutput"><span class="identifier">HPX_WITH_CXX0X</span></code></strong></span>:
              Enables Pre-C++11 support (This is the minimal required mode on older
              gcc versions).
            </li>
<li class="listitem">
              <span class="bold"><strong><code class="computeroutput"><span class="identifier">HPX_WITH_CXX11</span></code></strong></span>:
              Enables C++11 support
            </li>
<li class="listitem">
              <span class="bold"><strong><code class="computeroutput"><span class="identifier">HPX_WITH_CXX14</span></code></strong></span>:
              Enables C++14 support
            </li>
<li class="listitem">
              <span class="bold"><strong><code class="computeroutput"><span class="identifier">HPX_WITH_CXX0Y</span></code></strong></span>:
              Enables (experimental) C++17 support
            </li>
</ul></div>
<h6>
<a name="hpx.manual.build_system.building_hpx.h1"></a>
          <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_types"></a></span><a class="link" href="building_hpx.html#hpx.manual.build_system.building_hpx.build_types">Build
          Types</a>
        </h6>
<p>
          <a href="https://www.cmake.org" target="_top">CMake</a> can be configured to generate
          project files suitable for builds that have enabled debugging support or
          for an optimized build (without debugging support). The <a href="https://www.cmake.org" target="_top">CMake</a>
          variable used to set the build type is <code class="computeroutput"><span class="identifier">CMAKE_BUILD_TYPE</span></code>
          (for more information see the <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html" target="_top">CMake
          Documentation</a>). Available build types are:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              <span class="bold"><strong>Debug</strong></span>: Full debug symbols available
              and additional assertions to help debugging. To enable the debug build
              type for the <span class="emphasis"><em>HPX</em></span> API, the C++ Macro <code class="computeroutput"><span class="identifier">HPX_DEBUG</span></code> is defined.
            </li>
<li class="listitem">
              <span class="bold"><strong>RelWithDebInfo</strong></span>: Release build with
              debugging symbols. This is most useful for profiling applications
            </li>
<li class="listitem">
              <span class="bold"><strong>Release</strong></span>: Release build. This disables
              assertions and enables default compiler optimizations.
            </li>
<li class="listitem">
              <span class="bold"><strong>RelMinSize</strong></span>: Release build with optimizations
              for small binary sizes.
            </li>
</ul></div>
<div class="important"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../../images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top"><p>
            We currently don't guarantee ABI compatibility between Debug and Release
            builds. Please make sure that applications built against <span class="emphasis"><em>HPX</em></span>
            use the same build type as you used to build <span class="emphasis"><em>HPX</em></span>.
            For <a href="https://www.cmake.org" target="_top">CMake</a> builds, this means
            that the <code class="computeroutput"><span class="identifier">CMAKE_BUILD_TYPE</span></code>
            variables have to match and for projects not using <a href="https://www.cmake.org" target="_top">CMake</a>,
            the <code class="computeroutput"><span class="identifier">HPX_DEBUG</span></code> macro has
            to be set in debug mode.
          </p></td></tr>
</table></div>
<h6>
<a name="hpx.manual.build_system.building_hpx.h2"></a>
          <span class="phrase"><a name="hpx.manual.build_system.building_hpx.platform"></a></span><a class="link" href="building_hpx.html#hpx.manual.build_system.building_hpx.platform">Platform
          specific notes</a>
        </h6>
<p>
          Some Platforms require to have special link and/or compiler flags specified
          to build HPX. This is handled via <a href="https://www.cmake.org" target="_top">CMake</a>'s
          support for different toolchains (see <a href="https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html" target="_top">cmake-toolchains(7)</a>
          for more information). This is also used for cross compilation.
        </p>
<p>
          <span class="emphasis"><em>HPX</em></span> ships with a set of toolchains that can be used
          for compilation of <span class="emphasis"><em>HPX</em></span> itself and applications depending
          on <span class="emphasis"><em>HPX</em></span>. Please see <a class="link" href="building_hpx/cmake_toolchains.html" title="CMake Toolchains shipped with HPX">CMake
          Toolchains shipped with HPX</a> for more information.
        </p>
<p>
          In order to enable full static linking with the __libraries, the <a href="https://www.cmake.org" target="_top">CMake</a> variable <code class="computeroutput"><span class="identifier">HPX_WITH_STATIC_LINKING</span></code>
          has to be set to <code class="computeroutput"><span class="identifier">On</span></code>.
        </p>
<h6>
<a name="hpx.manual.build_system.building_hpx.h3"></a>
          <span class="phrase"><a name="hpx.manual.build_system.building_hpx.debugging_core"></a></span><a class="link" href="building_hpx.html#hpx.manual.build_system.building_hpx.debugging_core">Debugging
          applications using core files</a>
        </h6>
<p>
          For <span class="emphasis"><em>HPX</em></span> to generate useful core files, <span class="emphasis"><em>HPX</em></span>
          has to be compiled without signal and exception handlers (<code class="computeroutput"><span class="identifier">HPX_WITH_DISABLED_SIGNAL_EXCEPTION_HANDLERS</span></code>).
          If this option is not specified, the signal handlers change the application
          state. For example, after a segmentation fault the stack trace will show
          the signal handler. Similarly, unhandled exceptions are also caught by
          the these handlers and the stack trace will not point to the location where
          the unhandled exception was thrown.
        </p>
<p>
          In general, core files are a helpful tool to inspect the state of the application
          at the moment of the crash (post-mortem debugging), without the need of
          attaching a debugger beforehand. This approach to debugging is especially
          useful if the error cannot be reliably reproduced, as only a single crashed
          application run is required to gain potentially helpful information like
          a stacktrace.
        </p>
<p>
          To debug with core files, the operating system first has to be told to
          actually write them. On most unix systems this can be done by calling
        </p>
<pre class="programlisting"><span class="identifier">ulimit</span> <span class="special">-</span><span class="identifier">c</span> <span class="identifier">unlimited</span>
</pre>
<p>
          in the shell. Now the debugger can be started up with:
        </p>
<pre class="programlisting"><span class="identifier">gdb</span> <span class="special">&lt;</span><span class="identifier">application</span><span class="special">&gt;</span> <span class="special">&lt;</span><span class="identifier">core</span> <span class="identifier">file</span> <span class="identifier">name</span><span class="special">&gt;</span>
</pre>
<p>
          The debugger should now display the last state of the application. The
          default file name for core files is <code class="computeroutput"><span class="identifier">core</span></code>.
        </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2011-2018 The STE||AR Group
      (http://stellar-group.org)<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">LICENSE_1_0.txt</a>
        or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="prerequisites/hwloc_installation.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../build_system.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="building_hpx/cmake_variables.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Build recipes</title>
<link rel="stylesheet" href="../../../../src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../../../../index.html" title="HPX 1.1.0">
<link rel="up" href="../building_hpx.html" title="Building HPX">
<link rel="prev" href="cmake_toolchains.html" title="CMake Toolchains shipped with HPX">
<link rel="next" href="doc_tools.html" title="Setting up the HPX Documentation Tool Chain">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="HPX" width="536" height="100" src="../../../../images/hpx_1_1_0.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="cmake_toolchains.html"><img src="../../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../building_hpx.html"><img src="../../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../../index.html"><img src="../../../../images/home.png" alt="Home"></a><a accesskey="n" href="doc_tools.html"><img src="../../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="hpx.manual.build_system.building_hpx.build_recipes"></a><a class="link" href="build_recipes.html" title="Build recipes">Build
          recipes</a>
</h5></div></div></div>
<div class="toc"><dl class="toc">
<dt><span class="section"><a href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.unix_installation">How
            to Install <span class="emphasis"><em>HPX</em></span> on Unix Variants</a></span></dt>
<dt><span class="section"><a href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.macos_installation">How
            to Install <span class="emphasis"><em>HPX</em></span> on OS X (Mac)</a></span></dt>
<dt><span class="section"><a href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.windows_installation">How
            to Install <span class="emphasis"><em>HPX</em></span> on Windows</a></span></dt>
<dt><span class="section"><a href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.bgq_installation">How
            to Install <span class="emphasis"><em>HPX</em></span> on BlueGene/Q</a></span></dt>
<dt><span class="section"><a href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation">How
            to Install <span class="emphasis"><em>HPX</em></span> on the Xeon Phi</a></span></dt>
<dt><span class="section"><a href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.fedora_installation">How
            to Install <span class="emphasis"><em>HPX</em></span> on Fedora Distributions</a></span></dt>
</dl></div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="hpx.manual.build_system.building_hpx.build_recipes.unix_installation"></a><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.unix_installation" title="How to Install HPX on Unix Variants">How
            to Install <span class="emphasis"><em>HPX</em></span> on Unix Variants</a>
</h6></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                  Create a build directory. <span class="emphasis"><em>HPX</em></span> requires an
                  out-of-tree build. This means you will be unable to run CMake in
                  the <span class="emphasis"><em>HPX</em></span> source tree.
                </li></ul></div>
<pre class="programlisting">cd hpx
mkdir my_hpx_build
cd my_hpx_build
</pre>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                  Invoke CMake from your build directory, pointing the CMake driver
                  to the root of your <span class="emphasis"><em>HPX</em></span> source tree.
                </li></ul></div>
<pre class="programlisting">cmake -DBOOST_ROOT=/root/of/boost/installation \
      -DHWLOC_ROOT=/root/of/hwloc/installation
      [other CMake variable definitions] \
      /path/to/source/tree
</pre>
<div class="blockquote"><blockquote class="blockquote"><p>
                for instance:
              </p></blockquote></div>
<pre class="programlisting">cmake -DBOOST_ROOT=~/packages/boost -DHWLOC_ROOT=/packages/hwloc -DCMAKE_INSTALL_PREFIX=~/packages/hpx ~/downloads/hpx_0.9.10
</pre>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                  Invoke GNU make. If you are on a machine with multiple cores, add
                  the -jN flag to your make invocation, where N is the number of
                  parallel processes <span class="emphasis"><em>HPX</em></span> gets compiled with.
                </li></ul></div>
<pre class="programlisting">gmake -j4
</pre>
<div class="caution"><table border="0" summary="Caution">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="../../../../images/caution.png"></td>
<th align="left">Caution</th>
</tr>
<tr><td align="left" valign="top"><p>
                Compiling and linking <span class="emphasis"><em>HPX</em></span> needs a considerable
                amount of memory. It is advisable that at least 2 GB of memory per
                parallel process is available.
              </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
                Many Linux distributions use <code class="computeroutput">make</code> as an alias for <code class="computeroutput">gmake</code>
              </p></td></tr>
</table></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                  To complete the build and install <span class="emphasis"><em>HPX</em></span>:
                </li></ul></div>
<pre class="programlisting">gmake install
</pre>
<div class="important"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../../../images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top">
<p>
                These commands will build and install the essential core components
                of <span class="emphasis"><em>HPX</em></span> only. In order to build and run the tests,
                please invoke:
              </p>
<pre class="programlisting">gmake tests &amp;&amp; gmake test
</pre>
<p>
                and in order to build (and install) all examples invoke:
              </p>
<pre class="programlisting">cmake -DHPX_WITH_EXAMPLES=On .
gmake examples
gmake install
</pre>
</td></tr>
</table></div>
<p>
              For more detailed information about using <a href="http://www.cmake.org" target="_top">CMake</a>
              please refer its documentation and also the section <a class="link" href="../building_hpx.html" title="Building HPX">Building
              <span class="emphasis"><em>HPX</em></span> with CMake</a>. Please pay special attention
              to the section about HPX_WITH_MALLOC as this is crucial for getting
              decent performance.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="hpx.manual.build_system.building_hpx.build_recipes.macos_installation"></a><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.macos_installation" title="How to Install HPX on OS X (Mac)">How
            to Install <span class="emphasis"><em>HPX</em></span> on OS X (Mac)</a>
</h6></div></div></div>
<p>
              This section describes how to build <span class="emphasis"><em>HPX</em></span> for OS
              X (Mac).
            </p>
<h7><a name="hpx.manual.build_system.building_hpx.build_recipes.macos_installation.h0"></a>
              <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_recipes.macos_installation.build_and_install_a_recent_versi"></a></span><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.macos_installation.build_and_install_a_recent_versi">Build
              (and install) a recent version of Boost, using Clang and libc++</a>
            </h7><pre class="programlisting">To build Boost with Clang and make it link to libc++ as standard library,
you'll need to set up either of the following in your `~/user-config.jam`
file:
</pre>
<pre class="programlisting"># user-config.jam (put this file into your home directory)
# ...

using clang
    :
    : "/usr/bin/clang++"
    : &lt;cxxflags&gt;"-std=c++11 -fcolor-diagnostics"
      &lt;linkflags&gt;"-stdlib=libc++ -L/path/to/libcxx/lib"
    ;
</pre>
<p>
              (Again, remember to replace <code class="computeroutput">/path/to</code> with whatever you
              used earlier.)
            </p>
<pre class="programlisting">You can then use as build command either:
</pre>
<pre class="programlisting">b2 --build-dir=/tmp/build-boost --layout=versioned toolset=clang install -j4
</pre>
<p>
              or
            </p>
<pre class="programlisting">b2 --build-dir=/tmp/build-boost --layout=versioned toolset=clang install -j4
</pre>
<p>
              We verified this using Boost V1.53. If you use a different version,
              just remember to replace <code class="computeroutput">/usr/local/include/boost-1_53</code>
              with whatever include prefix you had in your installation.
            </p>
<h7><a name="hpx.manual.build_system.building_hpx.build_recipes.macos_installation.h1"></a>
              <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_recipes.macos_installation.build_hpx_finally"></a></span><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.macos_installation.build_hpx_finally">Build
              HPX, finally</a>
            </h7><pre class="programlisting">cd /path/to
git clone https://github.com/STEllAR-GROUP/hpx.git
mkdir build-hpx &amp;&amp; cd build-hpx
</pre>
<p>
              To build with Clang 3.2, execute:
            </p>
<pre class="programlisting">cmake ../hpx \
    -DCMAKE_CXX_COMPILER=clang++ \
    -DBOOST_INCLUDE_DIR=/usr/local/include/boost-1_53 \
    -DBOOST_LIBRARY_DIR=/usr/local/lib \
    -DBOOST_SUFFIX=-clang-darwin32-mt-1_53 \
make
</pre>
<p>
              To build with Clang 3.3 (trunk), execute:
            </p>
<pre class="programlisting">cmake ../hpx \
    -DCMAKE_CXX_COMPILER=clang++ \
    -DBOOST_INCLUDE_DIR=/usr/local/include/boost-1_53 \
    -DBOOST_LIBRARY_DIR=/usr/local/lib \
    -DBOOST_SUFFIX=-clang-darwin33-mt-1_53 \
make
</pre>
<p>
              For more detailed information about using <a href="http://www.cmake.org" target="_top">CMake</a>
              please refer its documentation and to the section <a class="link" href="../building_hpx.html" title="Building HPX">Building
              <span class="emphasis"><em>HPX</em></span> with CMake</a> for.
            </p>
<h7><a name="hpx.manual.build_system.building_hpx.build_recipes.macos_installation.h2"></a>
              <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_recipes.macos_installation.alternative_installation_method_"></a></span><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.macos_installation.alternative_installation_method_">Alternative
              Installation method of HPX on OS X (Mac)</a>
            </h7><p>
              Alternatively, you can install a recent version of gcc as well as all
              required libraries via MacPorts:
            </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
                  Install <a href="http://www.macports.org/" target="_top">MacPorts</a>
                </li>
<li class="listitem">
<p class="simpara">
                  Install CMake, gcc 4.8, and hwloc:
                </p>
<pre class="programlisting">sudo port install gcc48
sudo port install hwloc
</pre>
<p class="simpara">
                  You may also want:
                </p>
<pre class="programlisting">sudo port install cmake
sudo port install git-core
</pre>
</li>
<li class="listitem">
<p class="simpara">
                  Make this version of gcc your default compiler:
                </p>
<pre class="programlisting">sudo port install gcc_select
sudo port select gcc mp-gcc48
</pre>
</li>
<li class="listitem">
<p class="simpara">
                  Build Boost manually (the Boost package of MacPorts is built with
                  Clang, and unfortunately doesn't work with a GCC-build version
                  of HPX):
                </p>
<pre class="programlisting">wget http://sourceforge.net/projects/boost/files/boost/1.54.0/boost_1_54_0.tar.bz2
tar xjf boost_1_54_0.tar.bz2
pushd boost_1_54_0
export BOOST_ROOT=$HOME/boost_1_54_0
./bootstrap.sh --prefix=$BOOST_DIR
./b2 -j8
./b2 -j8 install
export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:$BOOST_ROOT/lib
popd
</pre>
</li>
<li class="listitem">
<p class="simpara">
                  Build HPX:
                </p>
<pre class="programlisting">git clone https://github.com/STEllAR-GROUP/hpx.git
mkdir hpx-build
pushd hpx-build
export HPX_ROOT=$HOME/hpx
cmake -DCMAKE_C_COMPILER=gcc \
    -DCMAKE_CXX_COMPILER=g++ \
    -DCMAKE_FORTRAN_COMPILER=gfortran \
    -DCMAKE_C_FLAGS="-Wno-unused-local-typedefs" \
    -DCMAKE_CXX_FLAGS="-Wno-unused-local-typedefs" \
    -DBOOST_ROOT=$BOOST_ROOT \
    -DHWLOC_ROOT=/opt/local \
    -DCMAKE_INSTALL_PREFIX=$HOME/hpx \
         $(pwd)/../hpx
make -j8
make -j8 install
export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:$HPX_ROOT/lib/hpx
popd
</pre>
</li>
<li class="listitem">
                  Note that you need to set <code class="computeroutput">BOOST_ROOT</code>, <code class="computeroutput">HPX_ROOT</code>,
                  and <code class="computeroutput">DYLD_LIBRARY_PATH</code> (for both <code class="computeroutput">BOOST_ROOT</code>
                  and <code class="computeroutput">HPX_ROOT</code>) every time you configure, build, or
                  run an HPX application.
                </li>
<li class="listitem">
                  If you want to use HPX with MPI, you need to enable the MPI parcelport,
                  and also specify the location of the MPI wrapper scripts. This
                  can be done e.g. with the following command:
                </li>
</ol></div>
<pre class="programlisting">cmake -DHPX_WITH_PARCELPORT_MPI=ON \
     -DCMAKE_C_COMPILER=gcc \
     -DCMAKE_CXX_COMPILER=g++ \
     -DCMAKE_FORTRAN_COMPILER=gfortran \
     -DMPI_C_COMPILER=openmpicc \
     -DMPI_CXX_COMPILER=openmpic++ \
     -DMPI_FORTRAN_COMPILER=openmpif90 \
     -DCMAKE_C_FLAGS="-Wno-unused-local-typedefs" \
     -DCMAKE_CXX_FLAGS="-Wno-unused-local-typedefs" \
     -DBOOST_ROOT=$BOOST_DIR \
     -DHWLOC_ROOT=/opt/local \
     -DCMAKE_INSTALL_PREFIX=$HOME/hpx
         $(pwd)/../hpx
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="hpx.manual.build_system.building_hpx.build_recipes.windows_installation"></a><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.windows_installation" title="How to Install HPX on Windows">How
            to Install <span class="emphasis"><em>HPX</em></span> on Windows</a>
</h6></div></div></div>
<h7><a name="hpx.manual.build_system.building_hpx.build_recipes.windows_installation.h0"></a>
              <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_recipes.windows_installation.installation_of_required_prerequ"></a></span><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.windows_installation.installation_of_required_prerequ">Installation
              of Required Prerequisites</a>
            </h7><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                  Download the Boost c++ libraries from <a href="http://www.boost.org/users/download/" target="_top">Boost
                  Downloads</a>
                </li>
<li class="listitem">
                  Install the boost library as explained in the section <a class="link" href="../prerequisites/boost_installation.html" title="Installing Boost Libraries">Installing
                  Boost Libraries</a>
                </li>
<li class="listitem">
                  Install the hwloc library as explained in the section <a class="link" href="../prerequisites/hwloc_installation.html" title="Installing Hwloc">Installing
                  Hwloc</a>
                </li>
<li class="listitem">
                  Download the latest version of <a href="http://www.cmake.org" target="_top">CMake</a>
                  binaries, which are located under the platform section of the downloads
                  page at <a href="http://www.cmake.org/cmake/resources/software.html" target="_top">CMake
                  Downloads</a>.
                </li>
<li class="listitem">
                  Download the latest version of <span class="emphasis"><em>HPX</em></span> from the
                  <a href="http://stellar-group.org" target="_top">STE||AR</a> website:
                  <a href="http://stellar-group.org/downloads/" target="_top"><span class="emphasis"><em>HPX</em></span>
                  Downloads</a>
                </li>
</ul></div>
<h7><a name="hpx.manual.build_system.building_hpx.build_recipes.windows_installation.h1"></a>
              <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_recipes.windows_installation.installation_of_the_hpx_library"></a></span><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.windows_installation.installation_of_the_hpx_library">Installation
              of the <span class="emphasis"><em>HPX</em></span> Library</a>
            </h7><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                  Create a build folder. <span class="emphasis"><em>HPX</em></span> requires an out-of-tree-build.
                  This means that you will be unable to run CMake in the <span class="emphasis"><em>HPX</em></span>
                  source folder.
                </li>
<li class="listitem">
                  Open up the CMake GUI. In the input box labelled "Where is
                  the source code:", enter the full path to the source folder.
                  The source directory is one where the sources were checked out.
                  CMakeLists.txt files in the source directory as well as the subdirectories
                  describe the build to CMake. In addition to this, there are CMake
                  scripts (usually ending in .cmake) stored in a special CMake directory.
                  CMake does not alter any file in the source directory and doesn't
                  add new ones either. In the input box labelled "Where to build
                  the binaries:", enter the full path to the build folder you
                  created before. The build directory is one where all compiler outputs
                  are stored, which includes object files and final executables.
                </li>
<li class="listitem">
                  Add CMake variable definitions (if any) by clicking the "Add
                  Entry" button. There are two required variables you need to
                  define: <code class="computeroutput"><span class="identifier">BOOST_ROOT</span></code>
                  and <code class="computeroutput"><span class="identifier">HWLOC_ROOT</span></code>.
                  These (PATH) variables need to be set to point to the root folder
                  of your <a href="http://www.boost.org/" target="_top">Boost</a> and <a href="http://www.open-mpi.org/projects/hwloc/" target="_top">Portable Hardware
                  Locality (HWLOC)</a> installations. It is recommended to set
                  the variable <code class="computeroutput"><span class="identifier">CMAKE_INSTALL_PREFIX</span></code>
                  as well. This determines where the HPX libraries will be built
                  and installed. If this (PATH) variable is set, it has to refer
                  to the directory where the built <span class="emphasis"><em>HPX</em></span> files
                  should be installed to.
                </li>
<li class="listitem">
                  Press the "Configure" button. A window will pop up asking
                  you which compilers to use. Select the Visual Studio 10 (64Bit)
                  compiler (it usually is the default if available). The Visual Studio
                  2012 (64Bit) and Visual Studio 2013 (64Bit) compilers are supported
                  as well. Note that while it is possible to build HPX for x86, we
                  don't recommend doing so as 32 bit runs are severely restricted
                  by a 32 bit Windows system limitation affecting the number of HPX
                  threads you can create.
                </li>
<li class="listitem">
                  Press "Configure" again. Repeat this step until the "Generate"
                  button becomes clickable (and until no variable definitions are
                  marked red anymore).
                </li>
<li class="listitem">
                  Press "Generate".
                </li>
<li class="listitem">
                  Open up the build folder, and double-click hpx.sln.
                </li>
<li class="listitem">
                  Build the INSTALL target.
                </li>
</ul></div>
<p>
              For more detailed information about using <a href="http://www.cmake.org" target="_top">CMake</a>
              please refer its documentation and also the section <a class="link" href="../building_hpx.html" title="Building HPX">Building
              <span class="emphasis"><em>HPX</em></span> with CMake</a>.
            </p>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="hpx.manual.build_system.building_hpx.build_recipes.windows_installation.howto_win32"></a><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.windows_installation.howto_win32" title="How to build HPX under Windows 10 x64 with Visual Studio 2015">How
              to build HPX under Windows 10 x64 with Visual Studio 2015</a>
</h6></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                    Download the <a href="http://www.cmake.org" target="_top">CMake</a>
                    V3.4.3 installer (or latest version) from <a href="https://blog.kitware.com/cmake-3-4-3-available-for-download/" target="_top">here</a>
                  </li>
<li class="listitem">
                    Download the <a href="http://www.open-mpi.org/projects/hwloc/" target="_top">Portable
                    Hardware Locality (HWLOC)</a> V1.11.0 (or latest version)
                    from <a href="http://www.open-mpi.org/software/hwloc/v1.11/downloads/hwloc-win64-build-1.11.0.zip" target="_top">here</a>
                    and unpack it.
                  </li>
<li class="listitem">
                    Download <a href="http://www.boost.org/" target="_top">Boost</a> libraries
                    V1.60 (or latest version) from <a href="https://sourceforge.net/projects/boost/files/boost/1.60.0/" target="_top">here</a>
                    and unpack them.
                  </li>
<li class="listitem">
<p class="simpara">
                    Build the boost DLLs and LIBs by using these commands from Command
                    Line (or PowerShell). Open CMD/PowerShell inside the Boost dir
                    and type in:
                  </p>
<pre class="programlisting"><span class="identifier">bootstrap</span><span class="special">.</span><span class="identifier">bat</span>
</pre>
<p class="simpara">
                    This batch file will set up everything needed to create a successful
                    build. Now execute:
                  </p>
<pre class="programlisting"><span class="identifier">b2</span><span class="special">.</span><span class="identifier">exe</span> <span class="identifier">link</span><span class="special">=</span><span class="identifier">shared</span> <span class="identifier">variant</span><span class="special">=</span><span class="identifier">release</span><span class="special">,</span><span class="identifier">debug</span> <span class="identifier">architecture</span><span class="special">=</span><span class="identifier">x86</span> <span class="identifier">address</span><span class="special">-</span><span class="identifier">model</span><span class="special">=</span><span class="number">64</span> <span class="identifier">threading</span><span class="special">=</span><span class="identifier">multi</span> <span class="special">--</span><span class="identifier">build</span><span class="special">-</span><span class="identifier">type</span><span class="special">=</span><span class="identifier">complete</span> <span class="identifier">install</span>
</pre>
<p class="simpara">
                    This command will start a (very long) build of all available
                    Boost libraries. Please, be patient.
                  </p>
</li>
<li class="listitem">
<p class="simpara">
                    Open CMake-GUI.exe and set up your source directory (input field
                    'Where is the source code') to the <span class="underline">base
                    directory</span> of the source code you downloaded from HPX's
                    GitHub pages. Here's an example of my CMake path settings which
                    point to my <code class="computeroutput"><span class="identifier">Documents</span><span class="special">/</span><span class="identifier">GitHub</span><span class="special">/</span><span class="identifier">hpx</span></code>
                    folder:
                  </p>
<p class="simpara">
                    <div class="figure">
<a name="win32_cmake_settings1"></a><p class="title"><b>Figure&#160;3.&#160;Example CMake path settings</b></p>
<div class="figure-contents"><span class="inlinemediaobject"><img src="../../../.././images/cmake_settings1.png" alt="Example CMake path settings"></span></div>
</div><br class="figure-break">
                  </p>
<p class="simpara">
                    Inside the 'Where is the source-code' enter the base directory
                    of your HPX source directory (do not enter the "src"
                    sub-directory!) Inside 'Where to build the binaries' you should
                    put in the path where all the building process will happen. This
                    is important because the building machinery will do an "out-of-tree"
                    build. CMake is not touching or changing in any way the original
                    source files. Instead, it will generate Visual Studio Solution
                    Files which will build HPX packages out of the HPX source tree.
                  </p>
</li>
<li class="listitem">
<p class="simpara">
                    Set four new environment variables (in CMake, not in Windows
                    environment, by the way): <code class="computeroutput"><span class="identifier">BOOST_ROOT</span></code>,
                    <code class="computeroutput"><span class="identifier">HWLOC_ROOT</span></code>,
                    <code class="computeroutput"><span class="identifier">CMAKE_INSTALL_PREFIX</span></code>
                    and <code class="computeroutput"><span class="identifier">HPX_WITH_BOOST_ALL_DYNAMIC_LINK</span></code>
                  </p>
<p class="simpara">
                    The meaning of these variables is as follows:
                  </p>
<p class="simpara">
                    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
                          <code class="computeroutput"><span class="identifier">BOOST_ROOT</span></code>:
                          the root directory of the unpacked Boost headers/cpp files.
                        </li>
<li class="listitem">
                          <code class="computeroutput"><span class="identifier">HWLOC_ROOT</span></code>:
                          the root directory of the unpacked Portable Hardware Locality
                          files.
                        </li>
<li class="listitem">
                          <code class="computeroutput"><span class="identifier">CMAKE_INSTALL_PREFIX</span></code>:
                          the "root directory" where the future builds
                          of HPX should be installed to.
                        </li>
</ul></div>
                  </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
                      HPX is a BIG software collection and I really don't recommend
                      using the default <code class="computeroutput"><span class="identifier">C</span><span class="special">:\</span><span class="identifier">Program</span>
                      <span class="identifier">Files</span><span class="special">\</span><span class="identifier">hpx</span></code>. I prefer simpler paths
                      <span class="bold"><strong>without</strong></span> white space, like
                      <code class="computeroutput"><span class="identifier">C</span><span class="special">:\</span><span class="identifier">bin</span><span class="special">\</span><span class="identifier">hpx</span></code> or <code class="computeroutput"><span class="identifier">D</span><span class="special">:\</span><span class="identifier">bin</span><span class="special">\</span><span class="identifier">hpx</span></code>
                      etc.
                    </p></td></tr>
</table></div>
<p class="simpara">
                    To insert new env-vars click on "Add Entry" and then
                    insert the name inside "Name", select <code class="computeroutput"><span class="identifier">PATH</span></code> as Type and put the path-name
                    in "Path" text field. Repeat this for the first three
                    variables.
                  </p>
<p class="simpara">
                    The last one: <code class="computeroutput"><span class="identifier">HPX_WITH_BOOST_ALL_DYNAMIC_LINK</span></code>
                    is a <code class="computeroutput"><span class="identifier">BOOL</span></code> and
                    must be checked (there will be a checkbox instead of a textfield).
                  </p>
<p class="simpara">
                    This is how variable insertion looks like:
                  </p>
<p class="simpara">
                    <div class="figure">
<a name="win32_cmake_settings2"></a><p class="title"><b>Figure&#160;4.&#160;Example CMake Adding Entry</b></p>
<div class="figure-contents"><span class="inlinemediaobject"><img src="../../../.././images/cmake_settings2.png" alt="Example CMake Adding Entry"></span></div>
</div><br class="figure-break">
                  </p>
<p class="simpara">
                    Alternatively you could provide <code class="computeroutput"><span class="identifier">BOOST_LIBRARYDIR</span></code>
                    instead of <code class="computeroutput"><span class="identifier">BOOST_ROOT</span></code>
                    with a difference that <code class="computeroutput"><span class="identifier">BOOST_LIBRARYDIR</span></code>
                    should point to the subdirectory inside Boost root where all
                    the compiled DLLs/LIBs are. I myself have used <code class="computeroutput"><span class="identifier">BOOST_LIBRARYDIR</span></code> which pointed
                    to the <code class="computeroutput"><span class="identifier">bin</span><span class="special">.</span><span class="identifier">v2</span></code> subdirectory under the Boost
                    rootdir. Important is to keep the meanings of these two variables
                    separated from each other: <code class="computeroutput"><span class="identifier">BOOST_DIR</span></code>
                    points to the ROOT folder of the boost library. <code class="computeroutput"><span class="identifier">BOOST_LIBRARYDIR</span></code> points to
                    the subdir inside Boost root folder where the compiled binaries
                    are.
                  </p>
</li>
<li class="listitem">
                    Click the 'Configure' button of CMake-GUI. You will be immediately
                    presented a small window where you can select the C++ compiler
                    to be used within Visual Studio. In my case I have used the latest
                    v14 (a.k.a C++ 2015) but older versions should be sufficient
                    too. Make sure to select the 64Bit compiler
                  </li>
<li class="listitem">
                    After the generate process has finished successfully click the
                    'Generate' button. Now, CMake will put new VS Solution files
                    into the BUILD folder you selected at the beginning.
                  </li>
<li class="listitem">
                    Open Visual Studio and load the <code class="computeroutput"><span class="identifier">HPX</span><span class="special">.</span><span class="identifier">sln</span></code>
                    from your build folder.
                  </li>
<li class="listitem">
<p class="simpara">
                    Go to <code class="computeroutput"><span class="identifier">CMakePredefinedTargets</span></code>
                    and build the <code class="computeroutput"><span class="identifier">INSTALL</span></code>
                    project:
                  </p>
<p class="simpara">
                    <div class="figure">
<a name="win32_vs_targets"></a><p class="title"><b>Figure&#160;5.&#160;Visual Studio INSTALL Target</b></p>
<div class="figure-contents"><span class="inlinemediaobject"><img src="../../../.././images/vs_targets_install.png" alt="Visual Studio INSTALL Target"></span></div>
</div><br class="figure-break">
                  </p>
<p class="simpara">
                    It will take some time to compile everything and in the end you
                    should see an output similar to this one:
                  </p>
<p class="simpara">
                    <div class="figure">
<a name="win32_vs_build_output"></a><p class="title"><b>Figure&#160;6.&#160;Visual Studio Build Output</b></p>
<div class="figure-contents"><span class="inlinemediaobject"><img src="../../../.././images/vs_build_output.png" alt="Visual Studio Build Output"></span></div>
</div><br class="figure-break">
                  </p>
</li>
</ul></div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="hpx.manual.build_system.building_hpx.build_recipes.bgq_installation"></a><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.bgq_installation" title="How to Install HPX on BlueGene/Q">How
            to Install <span class="emphasis"><em>HPX</em></span> on BlueGene/Q</a>
</h6></div></div></div>
<p>
              So far we only support BGClang for compiling <span class="emphasis"><em>HPX</em></span>
              on the BlueGene/Q.
            </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                  Check if BGClang is available on your installation. If not obtain
                  and install a copy from the <code class="computeroutput">BGClang trac page &lt;https://trac.alcf.anl.gov/projects/llvm-bgq&gt;</code>_
                </li>
<li class="listitem">
                  Build (and install) a recent version of <a href="http://www.open-mpi.org/software/hwloc/v1.11" target="_top">Hwloc
                  Downloads</a> With the following commands:
                </li>
</ul></div>
<pre class="programlisting">./configure \
  --host=powerpc64-bgq-linux \
  --prefix=$HOME/install/hwloc \
  --disable-shared \
  --enable-static \
  CPPFLAGS='-I/bgsys/drivers/ppcfloor -I/bgsys/drivers/ppcfloor/spi/include/kernel/cnk/'
make
make install
</pre>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                  Build (and install) a recent version of Boost, using BGClang::
                  To build Boost with BGClang, you'll need to set up the following
                  in your Boost <code class="computeroutput">~/user-config.jam</code> file:
                </li></ul></div>
<pre class="programlisting"># user-config.jam (put this file into your home directory)
using clang
  :
  : bgclang++11
  :
  ;
</pre>
<p>
              You can then use this as your build command:
            </p>
<pre class="programlisting">./bootstrap.sh
./b2 --build-dir=/tmp/build-boost --layout=versioned toolset=clang -j12
</pre>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                  Clone the master <span class="emphasis"><em>HPX</em></span> git repository (or a
                  stable tag):
                </li></ul></div>
<pre class="programlisting">git clone git://github.com/STEllAR-GROUP/hpx.git
</pre>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                  Generate the <span class="emphasis"><em>HPX</em></span> buildfiles using cmake:
                </li></ul></div>
<pre class="programlisting">cmake -DHPX_PLATFORM=BlueGeneQ \
        -DCMAKE_TOOLCHAIN_FILE=/path/to/hpx/cmake/toolchains/BGQ.cmake \
        -DCMAKE_CXX_COMPILER=bgclang++11 \
        -DMPI_CXX_COMPILER=mpiclang++11 \
        -DHWLOC_ROOT=/path/to/hwloc/installation \
        -DBOOST_ROOT=/path/to/boost \
        -DHPX_WITH_MALLOC=system \
        /path/to/hpx
</pre>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                  To complete the build and install <span class="emphasis"><em>HPX</em></span>:
                </li></ul></div>
<pre class="programlisting">make -j24
make install
</pre>
<pre class="programlisting">This will build and install the essential core components of <span class="emphasis"><em>HPX</em></span> only. Use:
</pre>
<pre class="programlisting">make -j24 examples
make -j24 install
</pre>
<pre class="programlisting">to build and install the examples.
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation"></a><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation" title="How to Install HPX on the Xeon Phi">How
            to Install <span class="emphasis"><em>HPX</em></span> on the Xeon Phi</a>
</h6></div></div></div>
<h7><a name="hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.h0"></a>
              <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.installation_of_the_boost_librar"></a></span><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.installation_of_the_boost_librar">Installation
              of the Boost Libraries</a>
            </h7><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                  Download <a href="http://www.boost.org/users/download/" target="_top">Boost
                  Downloads</a> for Linux and unpack the retrieved tarball.
                </li>
<li class="listitem">
<p class="simpara">
                  Adapt your ~/user-config.jam to contain the following lines:
                </p>
<pre class="programlisting"><span class="special">##</span> <span class="identifier">Toolset</span> <span class="identifier">to</span> <span class="identifier">be</span> <span class="identifier">used</span> <span class="keyword">for</span> <span class="identifier">compiling</span> <span class="keyword">for</span> <span class="identifier">the</span> <span class="identifier">host</span>
<span class="keyword">using</span> <span class="identifier">intel</span>
    <span class="special">:</span> <span class="identifier">host</span>
    <span class="special">:</span>
    <span class="special">:</span> <span class="special">&lt;</span><span class="identifier">cxxflags</span><span class="special">&gt;</span><span class="string">"-std=c++0x"</span>
    <span class="special">;</span>

<span class="special">##</span> <span class="identifier">Toolset</span> <span class="identifier">to</span> <span class="identifier">be</span> <span class="identifier">used</span> <span class="keyword">for</span> <span class="identifier">compiling</span> <span class="keyword">for</span> <span class="identifier">the</span> <span class="identifier">Xeon</span> <span class="identifier">Phi</span>
<span class="keyword">using</span> <span class="identifier">intel</span>
    <span class="special">:</span> <span class="identifier">mic</span>
    <span class="special">:</span>
    <span class="special">:</span> <span class="special">&lt;</span><span class="identifier">cxxflags</span><span class="special">&gt;</span><span class="string">"-std=c++0x -mmic"</span>
      <span class="special">&lt;</span><span class="identifier">linkflags</span><span class="special">&gt;</span><span class="string">"-std=c++0x -mmic"</span>
    <span class="special">;</span>
</pre>
</li>
<li class="listitem">
<p class="simpara">
                  Change to the directory you unpacked boost in (from now on referred
                  to as $BOOST_ROOT) and execute the following commands:
                </p>
<pre class="programlisting">./bootstrap.sh
./b2 toolset=intel-mic -j&lt;N&gt;
</pre>
<p class="simpara">
                  You should now have all the required boost libraries.
                </p>
</li>
</ul></div>
<h7><a name="hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.h1"></a>
              <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.installation_of_the_hwloc_librar"></a></span><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.installation_of_the_hwloc_librar">Installation
              of the hwloc Library</a>
            </h7><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                  Download <a href="http://www.open-mpi.org/software/hwloc/v1.11" target="_top">Hwloc
                  Downloads</a>, unpack the retrieved tarball and change to the
                  newly created directory
                </li>
<li class="listitem">
                  Run the configure-make-install procedure as follows
                </li>
</ul></div>
<pre class="programlisting">CC=icc CFLAGS=-mmic CXX=icpc CXXFLAGS=-mmic LDFLAGS=-mmic ./configure --host=x86_64-k1om-linux --prefix=$HWLOC_ROOT
make
make install
</pre>
<div class="important"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../../../images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top"><p>
                The minimally required version of the <a href="http://www.open-mpi.org/projects/hwloc/" target="_top">Portable
                Hardware Locality (HWLOC)</a> library on the Intel Xeon Phi is
                V1.6.
              </p></td></tr>
</table></div>
<p>
              You now have a working hwloc installation in $HWLOC_ROOT.
            </p>
<h7><a name="hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.h2"></a>
              <span class="phrase"><a name="hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.building_hpx"></a></span><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.intel_mic_installation.building_hpx">Building
              <span class="emphasis"><em>HPX</em></span></a>
            </h7><p>
              After all the prerequisites have been successfully installed, we can
              now start building and installing <span class="emphasis"><em>HPX</em></span>. The build
              procedure is almost the same as for <a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.unix_installation" title="How to Install HPX on Unix Variants">How
              to Install <span class="emphasis"><em>HPX</em></span> on Unix Variants</a> with the
              sole difference that you have to enable the Xeon Phi in the CMake Build
              system. This is achieved by invoking CMake in the following way:
            </p>
<pre class="programlisting">cmake                                             \
    -DCMAKE_TOOLCHAIN_FILE=/path/to/hpx/cmake/toolchains/XeonPhi.cmake \
    -DBOOST_ROOT=$BOOST_ROOT                      \
    -DHWLOC_ROOT=$HWLOC_ROOT                      \
    /path/to/hpx
</pre>
<p>
              For more detailed information about using <a href="http://www.cmake.org" target="_top">CMake</a>
              please refer its documentation and to the section <a class="link" href="../building_hpx.html" title="Building HPX">Building
              <span class="emphasis"><em>HPX</em></span> with CMake</a>. Please pay special attention
              to the section about HPX_WITH_MALLOC as this is crucial for getting
              decent performance on the Xeon Phi.
            </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="hpx.manual.build_system.building_hpx.build_recipes.fedora_installation"></a><a class="link" href="build_recipes.html#hpx.manual.build_system.building_hpx.build_recipes.fedora_installation" title="How to Install HPX on Fedora Distributions">How
            to Install <span class="emphasis"><em>HPX</em></span> on Fedora Distributions</a>
</h6></div></div></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
                This section of the manual is based off of our collaborators Patrick
                Diehl's blog <a href="http://diehlpk.github.io/2015/08/04/hpx-fedora.html" target="_top">Installing
                HPX on Fedora 22</a>.
              </p></td></tr>
</table></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
<p class="simpara">
                  Install all packages for minimal installation
                </p>
<pre class="programlisting">sudo dnf install gcc-c++ cmake boost-build boost boost-devel hwloc-devel \
  hwloc gcc-gfortran papi-devel gperftools-devel docbook-dtds \
  docbook-style-xsl libsodium-devel doxygen boost-doc hdf5-devel \
  fop boost-devel boost-openmpi-devel boost-mpich-devel
</pre>
</li>
<li class="listitem">
<p class="simpara">
                  Get the development branch of HPX
                </p>
<pre class="programlisting">git clone https://github.com/STEllAR-GROUP/hpx.git
</pre>
</li>
<li class="listitem">
<p class="simpara">
                  Configure it with CMake
                </p>
<pre class="programlisting">cd hpx
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/opt/hpx ..
make -j
make install
</pre>
</li>
</ul></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
<p>
                To build HPX without examples use:
              </p>
<pre class="programlisting">cmake -DCMAKE_INSTALL_PREFIX=/opt/hpx -DHPX_WITH_EXAMPLES=Off ..
</pre>
</td></tr>
</table></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<p class="simpara">
                  Add the library path of HPX to ldconfig
                </p>
<pre class="programlisting">sudo echo /opt/hpx/lib &gt; /etc/ld.so.conf.d/hpx.conf
sudo ldconfig
</pre>
</li></ul></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2011-2018 The STE||AR Group
      (http://stellar-group.org)<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">LICENSE_1_0.txt</a>
        or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="cmake_toolchains.html"><img src="../../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../building_hpx.html"><img src="../../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../../index.html"><img src="../../../../images/home.png" alt="Home"></a><a accesskey="n" href="doc_tools.html"><img src="../../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
